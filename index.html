<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>758/ITS — Cədvəl & Resurslar</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --glass-bg: rgba(255,255,255,0.06);
      --accent-1: #007BFF;
      --accent-2: #00C6FF;
      --success: #28a745;
      --danger: #ff4d4d;
      --card-radius: 12px;
      --max-width: 1100px;
    }

    *{box-sizing: border-box}
    html,body{height:100%}
    body {
      margin:0;
      padding:0;
      font-family: 'Poppins', sans-serif;
      color: #fff;
      min-height:100%;
      background: linear-gradient(0deg, rgba(0,0,0,0.45), rgba(0,0,0,0.45)), url("https://r.resimlink.com/S9ExOsnI.jpg") center/cover fixed no-repeat;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    .container{
      width:100%;
      max-width:var(--max-width);
      padding:18px;
    }

    .header-bar{
      width:100%;
      background: linear-gradient(135deg, rgba(0,12,60,0.6), rgba(0,60,120,0.35));
      backdrop-filter: blur(6px);
      padding:16px 18px;
      border-radius:14px;
      box-shadow: 0 6px 24px rgba(2,6,23,0.6);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }
    .brand {
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo {
      width:48px;
      height:48px;
      border-radius:10px;
      background: linear-gradient(135deg,var(--accent-1),var(--accent-2));
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      box-shadow: 0 4px 14px rgba(0,0,0,0.4);
    }
    .brand h1{font-size:18px;margin:0;letter-spacing:0.6px}
    .brand p{margin:0;font-size:12px;opacity:0.9}

    .menu {
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .menu button{
      border:none;
      padding:10px 16px;
      border-radius:999px;
      font-weight:600;
      cursor:pointer;
      background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
      color:#fff;
      box-shadow: 0 6px 16px rgba(0,0,0,0.35);
      transition: transform .15s, box-shadow .15s;
    }
    .menu button.secondary{
      background: transparent;
      border: 1px solid rgba(255,255,255,0.12);
    }
    .menu button:hover{ transform: translateY(-3px); }

    main{
      width:100%;
      margin-top:14px;
      display:flex;
      gap:20px;
      align-items:flex-start;
      justify-content:space-between;
    }

    .left-column, .right-column{
      width:100%;
    }
    .left-column{max-width:680px}
    .card{
      background: var(--glass-bg);
      border-radius: var(--card-radius);
      padding:16px;
      margin-bottom:18px;
      box-shadow: 0 6px 22px rgba(1,6,20,0.45);
      border: 1px solid rgba(255,255,255,0.04);
    }

    h2{margin:0 0 8px 0;font-size:18px}
    p.lead{margin:0 0 12px 0;color:rgba(255,255,255,0.9)}

    .schedule { display:flex; flex-direction:column; gap:10px; }
    .day{
      padding:12px;
      border-radius:10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.03);
    }
    .day strong{display:block;margin-bottom:6px}

    .pdf-grid{ display:grid; grid-template-columns: 1fr; gap:12px; }
    .pdf-card{display:flex; flex-direction:column; gap:8px}
    .pdf-actions{display:flex;gap:8px;flex-wrap:wrap}
    .btn{
      padding:8px 12px;border-radius:999px;border:none;font-weight:600;cursor:pointer;
    }
    .btn.primary{background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:#fff}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.08); color:#fff}

    iframe.viewer{
      width:100%;
      height:480px;
      border-radius:8px;
      border:none;
      background:#fff;
    }

    .game-embed{
      width:100%;
      height:480px;
      border-radius:8px;
      border:none;
    }

    #comments-list{ display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .comment{
      background: rgba(0,0,0,0.25);
      padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);
    }
    .comment small{opacity:0.8;color:#ddd}

    .footer{
      width:100%;
      max-width:var(--max-width);
      margin:22px auto 40px;
      text-align:center;
      color:rgba(255,255,255,0.9);
      font-size:14px;
      opacity:0.95;
    }

    @media (max-width:980px){
      main{flex-direction:column}
      .left-column{max-width:100%}
      iframe.viewer, .game-embed{height:340px}
    }
    @media (max-width:520px){
      .menu{justify-content:center}
      .header-bar{flex-direction:column;gap:10px;align-items:center}
      .logo{width:44px;height:44px}
      .brand h1{font-size:16px}
      iframe.viewer, .game-embed{height:280px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-bar">
      <div class="brand">
        <div class="logo">758</div>
        <div>
          <h1>758 / ITS</h1>
          <p style="font-size:12px;margin-top:4px;">Cədvəl, PDF & oyunlar — by Kenan</p>
        </div>
      </div>

      <div class="menu" role="navigation" aria-label="Main menu">
        <button onclick="showSection('scheduleSection')" class="primary">Cədvəl</button>
        <button onclick="showSection('pdfsSection')" class="secondary">PDF</button>
        <button onclick="showSection('flappySection')" class="secondary">Flappy Ramin</button>
        <button onclick="showSection('bagikSection')" class="secondary">Bagik Run</button>
      </div>
    </div>

    <main>
      <div class="left-column">
        <section id="scheduleSection" class="card" aria-labelledby="scheduleTitle">
          <h2 id="scheduleTitle">CƏDVƏL</h2>
          <p class="lead" id="weekType">Yüklənir...</p>
          <div id="schedule" class="schedule" aria-live="polite"></div>
        </section>

        <section id="pdfsSection" class="card hidden" aria-labelledby="pdfsTitle">
          <h2 id="pdfsTitle">PDF Sənədləri</h2>
          <p class="lead">Dərsliklər və resurslar. Tam ekran üçün "Tam Ekran" düyməsinə basın.</p>

          <div class="pdf-grid">
            <div class="pdf-card pdf-container card" id="pdfCard1">
              <h3>English for Information Technology 1</h3>
              <iframe id="pdf1" class="viewer" title="English for IT 1"></iframe>
              <div class="pdf-actions">
                <a id="pdf1-download" class="btn ghost" target="_blank" rel="noopener">Yüklə</a>
                <button class="btn primary" onclick="openFullScreen('https://drive.google.com/file/d/1nis8yYs2h62nUswOa8qfGGlmHwZUZ0R2/preview')">Tam Ekran</button>
              </div>
            </div>

            <div class="pdf-card pdf-container card" id="pdfCard2">
              <h3>Murphy (qırmızı kitab)</h3>
              <iframe id="pdf2" class="viewer" title="Murphy"></iframe>
              <div class="pdf-actions">
                <a id="pdf2-download" class="btn ghost" target="_blank" rel="noopener">Yüklə</a>
                <button class="btn primary" onclick="openFullScreen('https://drive.google.com/file/d/16RVdE5pbYHQap9Em_sIZN2v8T0IJpT_e/preview')">Tam Ekran</button>
              </div>
            </div>
          </div>
        </section>

        <section id="flappySection" class="card hidden" aria-labelledby="flappyTitle">
          <h2 id="flappyTitle">Flappy Ramin</h2>
          <p class="lead">Flappy Ramin oyununu oynamaq üçün yuxarı hissədəki düyməyə klik edin</p>
          <div id="flappyContainer">
          </div>
        </section>

        <section id="bagikSection" class="card hidden" aria-labelledby="bagikTitle">
          <h2 id="bagikTitle">Bagik Run</h2>
          <p class="lead">Bagik Run oyununu oynamaq üçün yuxarı hissədəki düyməyə klik edin</p>
          <div id="bagikContainer"></div>
        </section>
      </div>

      <aside class="right-column" style="max-width:380px;">
        <div class="card" id="commentsSection">
          <h2>Qeydlər</h2>
          <form id="comment-form" aria-label="Comment form">
            <div style="display:flex;gap:8px;flex-wrap:wrap;">
              <input id="name-input" name="name" placeholder="Adın" required style="flex:1;padding:10px;border-radius:10px;border:none;"/>
              <input id="comment-input" name="comment" placeholder="Nərbaladı e qadan alım" required style="flex:2;padding:10px;border-radius:10px;border:none;"/>
            </div>
            <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end;">
              <button type="submit" class="btn primary">Göndər</button>
            </div>
          </form>

          <div id="comments-list" aria-live="polite" style="margin-top:12px;"></div>
        </div>

        <div class="card" style="text-align:center;">
          <h3>Əlaqə & Sosial</h3>
          <a href="https://www.instagram.com/keno.akhmadov/" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:8px;text-decoration:none;color:#fff;font-weight:600;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="IG" style="width:28px;height:28px;border-radius:6px;"/>
            @keno.akhmadov
          </a>
          <div style="margin-top:12px;">
            <img src="https://i.hizliresim.com/h4hr0s2.jpg" alt="footer" style="width:100%;border-radius:8px;"/>
          </div>
        </div>
      </aside>
    </main>

    <div class="footer">© <strong>Kenan</strong> — hazırlayan: Kənan Əhmədov :)</div>
  </div>

  <script>
    function showSection(sectionId){
      const ids = ['scheduleSection','pdfsSection','flappySection','bagikSection'];
      ids.forEach(id => {
        const el = document.getElementById(id);
        if(!el) return;
        if(id === sectionId) el.classList.remove('hidden'); else el.classList.add('hidden');
      });

      if(sectionId === 'pdfsSection') loadPDFs();
      if(sectionId === 'flappySection') loadFlappy();
      if(sectionId === 'bagikSection') loadBagik();
    }

    function openFullScreen(url){
      window.open(url, '_blank').focus();
    }
  </script>

  <script>
    let clientId = localStorage.getItem('clientId');
    if(!clientId){
      clientId = 'client-' + Math.random().toString(36).slice(2,11);
      localStorage.setItem('clientId', clientId);
    }

    let clientIP = localStorage.getItem('clientIP');
    if(!clientIP){
      fetch('https://api.ipify.org?format=json')
        .then(r => r.json())
        .then(data => {
          if(data && data.ip){
            clientIP = data.ip;
            localStorage.setItem('clientIP', clientIP);
          } else {
            clientIP = 'unknown';
          }
        }).catch(err => { clientIP = 'unknown'; });
    }
  </script>

  <script>
    function loadPDFs(){
      const pdf1 = document.getElementById('pdf1');
      const pdf1Download = document.getElementById('pdf1-download');
      const pdf2 = document.getElementById('pdf2');
      const pdf2Download = document.getElementById('pdf2-download');

      if(pdf1 && !pdf1.src){
        pdf1.src = "https://drive.google.com/file/d/1nis8yYs2h62nUswOa8qfGGlmHwZUZ0R2/preview";
        pdf1Download.href = "https://drive.google.com/uc?export=download&id=1nis8yYs2h62nUswOa8qfGGlmHwZUZ0R2";
      }
      if(pdf2 && !pdf2.src){
        pdf2.src = "https://drive.google.com/file/d/16RVdE5pbYHQap9Em_sIZN2v8T0IJpT_e/preview";
        pdf2Download.href = "https://drive.google.com/uc?export=download&id=16RVdE5pbYHQap9Em_sIZN2v8T0IJpT_e";
      }
    }

    function loadFlappy(){
      const container = document.getElementById('flappyContainer');
      if(!container.querySelector('iframe')){
        const iframe = document.createElement('iframe');
        iframe.className = 'game-embed';
        iframe.src = 'https://kenox7.github.io/FlappyRaminn/';
        iframe.title = 'Flappy Ramin';
        iframe.loading = 'lazy';
        container.appendChild(iframe);
      }
    }

    function loadBagik(){
      const container = document.getElementById('bagikContainer');
      if(!container.querySelector('iframe')){
        const iframe = document.createElement('iframe');
        iframe.className = 'game-embed';
        iframe.src = 'https://kenox7.github.io/BagikRun/';
        iframe.title = 'Bagik Run';
        iframe.loading = 'lazy';
        container.appendChild(iframe);
      }
    }
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

    const firebaseConfig = {
      databaseURL: "https://yorumlar-8f969-default-rtdb.firebaseio.com/"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const commentsRef = ref(db, "comments");

    const form = document.getElementById('comment-form');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('name-input').value.trim();
      const text = document.getElementById('comment-input').value.trim();
      if(!name || !text) return;

      const clientIdLocal = localStorage.getItem('clientId') || 'unknown';
      const clientIPLocal = localStorage.getItem('clientIP') || 'unknown';

      push(commentsRef, {
        name,
        text,
        timestamp: Date.now(),
        ip: clientIPLocal,
        clientId: clientIdLocal
      });

      document.getElementById('name-input').value = '';
      document.getElementById('comment-input').value = '';
    });
    onValue(commentsRef, (snapshot) => {
      const commentsList = document.getElementById('comments-list');
      commentsList.innerHTML = '';
      const arr = [];
      snapshot.forEach(child => {
        arr.push(child.val());
      });
      arr.sort((a,b)=> (b.timestamp||0)-(a.timestamp||0));
      arr.forEach(item => {
        const div = document.createElement('div');
        div.className = 'comment';
        const date = item.timestamp ? new Date(item.timestamp).toLocaleString('az-AZ') : '';
        div.innerHTML = `<strong>${escapeHtml(item.name)}</strong> <small style="float:right">${date}</small><div style="margin-top:8px;">${escapeHtml(item.text)}</div>`;
        commentsList.appendChild(div);
      });
    });
    function escapeHtml(str=''){
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#039;');
    }
  </script>
  <script>
    const startDate = new Date("2024-02-24T00:00:00");

    const dersCedveli = {
      "alt": {
          1: ["1)IT əsasları (seminar) - Kazımov Ramin (08:00, otaq 02KM)", "2)Diferensial tənliklər (mühazirə) - Eyyubov Ramazan (09:35, otaq 202)", "3)Fizika (mühazirə) - Əlizadə Leyla (11:10, otaq 413)"],
          2: ["1)Xətti cəbr və analtik həndəsə (seminar) - Səmədzadə Fərahim (08:00, otaq 508)", "2)XDİAK-2 (seminar) - Abbasova Nuridə (09:35, otaq 115)"],
          3: ["2)XDİAK-2 (seminar) - Abbasova Nuridə (09:35, otaq 503)", "3)IT əsasları-2 (mühazirə) - Kazımov Ramin (11:10, otaq 05KM)"],
          4: ["3)İnstrumental və tətbiqi proqramlar (seminar) - Göyüşlü Rəvanə (11:10, otaq 05KM)"],
          5: ["2)Proqramlaşdırma əsasları (mühazirə) - Sənan Niyazi (09:35, otaq 05KM)", "3)İnstrumental və tətbiqi proqramlar (mühazirə) - Göyüşlü Rəvanə (11:20, otaq 04KM)"]
      },
      "ust": {
          1: ["1)Xətti cəbr və analtik həndəsə (mühazirə) - Səmədzadə Fərahim (08:00, otaq 515)", "2)Diferensial tənliklər (mühazirə) - Eyyubov Ramazan (09:35, otaq 202)", "3)Fizika (mühazirə) - Əlizadə Leyla (11:10, otaq 413)"],
          2: ["1)Xətti cəbr və analtik həndəsə (seminar) - Səmədzadə Fərahim (08:00, otaq 508)", "2)XDİAK-2 (seminar) - Abbasova Nuridə (09:35, otaq 115)", "3)Proqramlaşdırmanın əsasları (seminar) - Sənan Niyazi (11:10, otaq 06KM)"],
          3: ["2)XDİAK-2 (seminar) - Abbasova Nuridə (09:35, otaq 503)", "3)İT əsasları-2 (mühazirə) - Kazımov Ramin (11:10, otaq 05KM)"],
          4: ["2)Diferensial tənliklər (seminar) - Ramazan Eyyubov (09:35, otaq 329)", "3)Fizika Seminar (seminar) - Əlizadə Leyla (11:10, otaq 502)"],
          5: ["2)Proqramlaşdırma əsasları (mühazirə) - Sənan Niyazi (09:35, otaq 05KM)", "3)İnstrumental və tətbiqi proqramlar (mühazirə) - Göyüşlü Rəvanə (11:20, otaq 04KM)"]
      }
    };

    function hefteniTap(date){
      const diff = Math.floor((date - startDate) / (7*24*60*60*1000));
      return (diff % 2 === 0) ? 'alt' : 'ust';
    }

    function tarixFormatla(date){
      const gunler = ["Bazar günü","1-ci Gün Bazar ertəsi","2-ci Gün Çərşənbə axşamı","3-cü Gün Çərşənbə","4-cü Gün Cümə axşamı","5-ci Gün Cümə","Şənbə"];
      const aylar = ["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"];
      return `${gunler[date.getDay()]}, ${date.getDate()} ${aylar[date.getMonth()]} ${date.getFullYear()}`;
    }

    function dersleriGoster(){
      const container = document.getElementById('schedule');
      container.innerHTML = '';
      const bugun = new Date();
      const hafta = hefteniTap(bugun);
      document.getElementById('weekType').innerText = `Bu həftə: ${hafta.toUpperCase()} həftədir`;

      for(let i=0;i<7;i++){
        const t = new Date();
        t.setDate(bugun.getDate() + i);
        const g = t.getDay();
        if(g > 0 && g < 6 && dersCedveli[hafta] && dersCedveli[hafta][g]){
          const dersler = dersCedveli[hafta][g].join('<br>');
          const div = document.createElement('div');
          div.className = 'day';
          div.innerHTML = `<strong>${tarixFormatla(t)}</strong>${dersler ? '<div style="margin-top:8px;">'+dersler+'</div>' : ''}`;
          container.appendChild(div);
        }
      }
    }
    dersleriGoster();
  </script>
</body>
</html>
